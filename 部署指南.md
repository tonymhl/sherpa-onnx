# Sherpa-ONNX TTS æ¨¡å‹ç¦»çº¿éƒ¨ç½²æŒ‡å—

## ğŸ“– ç›®å½•
- [Windows æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º](#windows-æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º)
- [æ¨¡å‹ä¸‹è½½ä¸æµ‹è¯•](#æ¨¡å‹ä¸‹è½½ä¸æµ‹è¯•)
- [ç¦»çº¿éƒ¨ç½²åŒ…åˆ¶ä½œ](#ç¦»çº¿éƒ¨ç½²åŒ…åˆ¶ä½œ)
- [CentOS æœåŠ¡å™¨éƒ¨ç½²](#centos-æœåŠ¡å™¨éƒ¨ç½²)

---

## ğŸªŸ Windows æœ¬åœ°æµ‹è¯•ç¯å¢ƒæ­å»º

### 1. å®‰è£… Python ç¯å¢ƒ

ç¡®ä¿æ‚¨çš„ Windows ç³»ç»Ÿå·²å®‰è£… Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

```powershell
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version

# å¦‚æœæœªå®‰è£…ï¼Œè¯·ä»å®˜ç½‘ä¸‹è½½ï¼šhttps://www.python.org/downloads/
```

### 2. å®‰è£… sherpa-onnx Python åŒ…

#### æ–¹æ¡ˆAï¼šåœ¨çº¿å®‰è£…ï¼ˆç”¨äºæµ‹è¯•ï¼‰

```powershell
# å®‰è£… sherpa-onnx åŠä¾èµ–
pip install sherpa-onnx soundfile

# éªŒè¯å®‰è£…
python -c "import sherpa_onnx; print(sherpa_onnx.__version__)"
```

#### æ–¹æ¡ˆBï¼šç¦»çº¿å®‰è£…å‡†å¤‡ï¼ˆç”¨äºåç»­æ‰“åŒ…ï¼‰

```powershell
# 1. åˆ›å»ºå·¥ä½œç›®å½•
mkdir D:\tts-offline-deploy
cd D:\tts-offline-deploy

# 2. ä¸‹è½½æ‰€æœ‰ä¾èµ–åŒ…åˆ°æœ¬åœ°
mkdir python-packages
pip download sherpa-onnx soundfile -d python-packages

# 3. ä»æœ¬åœ°å®‰è£…ï¼ˆæµ‹è¯•ç¦»çº¿å®‰è£…æ˜¯å¦æ­£å¸¸ï¼‰
pip install --no-index --find-links=python-packages sherpa-onnx soundfile
```

---

## ğŸ“¦ æ¨¡å‹ä¸‹è½½ä¸æµ‹è¯•

### 1. ä¸‹è½½ vits-melo-tts-zh_en æ¨¡å‹

```powershell
# è¿›å…¥å·¥ä½œç›®å½•
cd D:\tts-offline-deploy

# æ–¹æ³•1ï¼šä½¿ç”¨ PowerShell ä¸‹è½½
Invoke-WebRequest -Uri "https://github.com/k2-fsa/sherpa-onnx/releases/download/tts-models/vits-melo-tts-zh_en.tar.bz2" -OutFile "vits-melo-tts-zh_en.tar.bz2"

# æ–¹æ³•2ï¼šå¦‚æœä¸Šè¿°æ–¹æ³•å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰‹åŠ¨ä¸‹è½½
# ä¸‹è½½åœ°å€ï¼šhttps://github.com/k2-fsa/sherpa-onnx/releases/download/tts-models/vits-melo-tts-zh_en.tar.bz2
```

### 2. è§£å‹æ¨¡å‹æ–‡ä»¶

```powershell
# éœ€è¦å®‰è£… 7-Zip æˆ– WinRAR æ¥è§£å‹ .tar.bz2 æ–‡ä»¶
# ä½¿ç”¨ 7-Zip å‘½ä»¤è¡Œè§£å‹ï¼ˆå‡è®¾å·²å®‰è£…ï¼‰
"C:\Program Files\7-Zip\7z.exe" x vits-melo-tts-zh_en.tar.bz2
"C:\Program Files\7-Zip\7z.exe" x vits-melo-tts-zh_en.tar

# æˆ–è€…å¯ä»¥ä½¿ç”¨ Python è§£å‹
python -c "import tarfile; tarfile.open('vits-melo-tts-zh_en.tar.bz2').extractall()"
```

### 3. åˆ›å»ºæµ‹è¯•è„šæœ¬

å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º `test_tts.py`ï¼š

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sherpa_onnx
import soundfile as sf
import time

def test_tts_zh_en():
    """æµ‹è¯•ä¸­è‹±æ–‡æ··åˆTTS"""
    
    # é…ç½®æ¨¡å‹è·¯å¾„
    tts_config = sherpa_onnx.OfflineTtsConfig(
        model=sherpa_onnx.OfflineTtsModelConfig(
            vits=sherpa_onnx.OfflineTtsVitsModelConfig(
                model="./vits-melo-tts-zh_en/model.onnx",
                lexicon="./vits-melo-tts-zh_en/lexicon.txt",
                tokens="./vits-melo-tts-zh_en/tokens.txt",
            ),
            num_threads=4,  # æ ¹æ®æ‚¨çš„CPUæ ¸å¿ƒæ•°è°ƒæ•´
            debug=False,
            provider="cpu",
        ),
        max_num_sentences=1,
    )
    
    # éªŒè¯é…ç½®
    if not tts_config.validate():
        raise ValueError("é…ç½®éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ¨¡å‹æ–‡ä»¶è·¯å¾„")
    
    # åˆ›å»º TTS å¯¹è±¡
    tts = sherpa_onnx.OfflineTts(tts_config)
    
    # æµ‹è¯•ç”¨ä¾‹
    test_cases = [
        ("çº¯ä¸­æ–‡æµ‹è¯•ï¼šä½ å¥½ä¸–ç•Œï¼Œè¿™æ˜¯ä¸€ä¸ªè¯­éŸ³åˆæˆæµ‹è¯•ã€‚", "test_chinese.wav"),
        ("English test: Hello world, this is a text to speech test.", "test_english.wav"),
        ("ä¸­è‹±æ··åˆï¼šHelloå¤§å®¶å¥½ï¼Œtodayæˆ‘ä»¬æµ‹è¯•TTSåŠŸèƒ½ã€‚", "test_mixed.wav"),
        ("æ•°å­—æµ‹è¯•ï¼šä»Šå¤©æ˜¯2024å¹´10æœˆ21æ—¥ï¼Œç”µè¯å·ç æ˜¯13812345678ã€‚", "test_numbers.wav"),
    ]
    
    print("=" * 60)
    print("å¼€å§‹æµ‹è¯• vits-melo-tts-zh_en æ¨¡å‹")
    print("=" * 60)
    
    for i, (text, filename) in enumerate(test_cases, 1):
        print(f"\n[{i}/{len(test_cases)}] æµ‹è¯•æ–‡æœ¬: {text}")
        
        try:
            start_time = time.time()
            audio = tts.generate(text, sid=0, speed=1.0)
            end_time = time.time()
            
            if len(audio.samples) == 0:
                print(f"âŒ é”™è¯¯ï¼šéŸ³é¢‘ç”Ÿæˆå¤±è´¥")
                continue
            
            # ä¿å­˜éŸ³é¢‘
            sf.write(
                filename,
                audio.samples,
                samplerate=audio.sample_rate,
                subtype="PCM_16",
            )
            
            # è®¡ç®—æ€§èƒ½æŒ‡æ ‡
            elapsed_seconds = end_time - start_time
            audio_duration = len(audio.samples) / audio.sample_rate
            rtf = elapsed_seconds / audio_duration
            
            print(f"âœ… æˆåŠŸä¿å­˜åˆ°: {filename}")
            print(f"   éŸ³é¢‘æ—¶é•¿: {audio_duration:.2f}ç§’")
            print(f"   ç”Ÿæˆè€—æ—¶: {elapsed_seconds:.2f}ç§’")
            print(f"   RTF (å®æ—¶ç‡): {rtf:.3f}")
            
        except Exception as e:
            print(f"âŒ ç”Ÿæˆå¤±è´¥: {str(e)}")
    
    print("\n" + "=" * 60)
    print("æµ‹è¯•å®Œæˆï¼")
    print("=" * 60)

if __name__ == "__main__":
    test_tts_zh_en()
```

### 4. è¿è¡Œæµ‹è¯•

```powershell
python test_tts.py
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨ä¼šçœ‹åˆ°ç”Ÿæˆäº†4ä¸ª WAV éŸ³é¢‘æ–‡ä»¶ã€‚

---

## ğŸ“¦ ç¦»çº¿éƒ¨ç½²åŒ…åˆ¶ä½œ

### 1. å‡†å¤‡ç¦»çº¿éƒ¨ç½²åŒ…ç»“æ„

```powershell
# åˆ›å»ºéƒ¨ç½²åŒ…ç›®å½•
mkdir D:\tts-deploy-package
cd D:\tts-deploy-package

# åˆ›å»ºç›®å½•ç»“æ„
mkdir models
mkdir python-packages
mkdir scripts
```

### 2. æ”¶é›†æ‰€æœ‰å¿…è¦æ–‡ä»¶

```powershell
# å¤åˆ¶æ¨¡å‹æ–‡ä»¶
Copy-Item -Recurse D:\tts-offline-deploy\vits-melo-tts-zh_en models\

# å¤åˆ¶ Python åŒ…
Copy-Item -Recurse D:\tts-offline-deploy\python-packages\* python-packages\

# å¤åˆ¶æµ‹è¯•è„šæœ¬
Copy-Item D:\tts-offline-deploy\test_tts.py scripts\
```

### 3. åˆ›å»ºè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

**Windows éƒ¨ç½²è„šæœ¬** (`deploy_windows.bat`)ï¼š

```batch
@echo off
chcp 65001
echo ===================================
echo Sherpa-ONNX TTS ç¦»çº¿éƒ¨ç½²è„šæœ¬ (Windows)
echo ===================================
echo.

REM æ£€æŸ¥ Python
python --version >nul 2>&1
if %errorlevel% neq 0 (
    echo [é”™è¯¯] æœªæ£€æµ‹åˆ° Pythonï¼Œè¯·å…ˆå®‰è£… Python 3.8+
    pause
    exit /b 1
)

echo [1/3] å®‰è£… Python ä¾èµ–åŒ…...
pip install --no-index --find-links=python-packages sherpa-onnx soundfile

echo.
echo [2/3] éªŒè¯å®‰è£…...
python -c "import sherpa_onnx; import soundfile; print('ä¾èµ–åŒ…å®‰è£…æˆåŠŸï¼')"

echo.
echo [3/3] è¿è¡Œæµ‹è¯•...
cd scripts
python test_tts.py

echo.
echo ===================================
echo éƒ¨ç½²å®Œæˆï¼
echo ===================================
pause
```

**Linux/CentOS éƒ¨ç½²è„šæœ¬** (`deploy_centos.sh`)ï¼š

```bash
#!/bin/bash

echo "==================================="
echo "Sherpa-ONNX TTS ç¦»çº¿éƒ¨ç½²è„šæœ¬ (CentOS)"
echo "==================================="
echo

# æ£€æŸ¥ Python
if ! command -v python3 &> /dev/null; then
    echo "[é”™è¯¯] æœªæ£€æµ‹åˆ° Python3ï¼Œè¯·å…ˆå®‰è£…"
    exit 1
fi

echo "[1/4] å®‰è£…ç³»ç»Ÿä¾èµ–..."
sudo yum install -y gcc gcc-c++ make

echo
echo "[2/4] åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰..."
python3 -m venv venv
source venv/bin/activate

echo
echo "[3/4] å®‰è£… Python ä¾èµ–åŒ…..."
pip3 install --no-index --find-links=python-packages sherpa-onnx soundfile

echo
echo "[4/4] éªŒè¯å®‰è£…..."
python3 -c "import sherpa_onnx; import soundfile; print('ä¾èµ–åŒ…å®‰è£…æˆåŠŸï¼')"

echo
echo "è¿è¡Œæµ‹è¯•ï¼š"
cd scripts
python3 test_tts.py

echo
echo "==================================="
echo "éƒ¨ç½²å®Œæˆï¼"
echo "==================================="
```

### 4. åˆ›å»º README æ–‡ä»¶

```powershell
# åˆ›å»º README.md
@"
# Sherpa-ONNX TTS ç¦»çº¿éƒ¨ç½²åŒ…

## ğŸ“¦ åŒ…å«å†…å®¹

- `models/vits-melo-tts-zh_en/`: TTS æ¨¡å‹æ–‡ä»¶
- `python-packages/`: Python ç¦»çº¿å®‰è£…åŒ…
- `scripts/`: æµ‹è¯•è„šæœ¬
- `deploy_windows.bat`: Windows è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- `deploy_centos.sh`: CentOS è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windows ç¯å¢ƒ

1. ç¡®ä¿å·²å®‰è£… Python 3.8+
2. åŒå‡»è¿è¡Œ `deploy_windows.bat`

### CentOS ç¯å¢ƒ

1. ç¡®ä¿å·²å®‰è£… Python 3.8+
2. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   chmod +x deploy_centos.sh
   ./deploy_centos.sh
   ```

## ğŸ“ æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
pip install --no-index --find-links=python-packages sherpa-onnx soundfile
```

### 2. è¿è¡Œæµ‹è¯•

```bash
cd scripts
python test_tts.py
```

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå¯¼å…¥ sherpa_onnx å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦ä¸º 3.8+
- ç¡®è®¤æ˜¯å¦æ­£ç¡®å®‰è£…äº†æ‰€æœ‰ä¾èµ–åŒ…

### é—®é¢˜2ï¼šæ‰¾ä¸åˆ°æ¨¡å‹æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ `models/vits-melo-tts-zh_en/` ç›®å½•ä¸‹æ˜¯å¦æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š
  - model.onnx
  - lexicon.txt
  - tokens.txt

### é—®é¢˜3ï¼šCentOS ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
sudo yum install -y gcc gcc-c++ make python3-devel
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- å®˜æ–¹æ–‡æ¡£ï¼šhttps://k2-fsa.github.io/sherpa/onnx/tts/
- GitHubï¼šhttps://github.com/k2-fsa/sherpa-onnx

## ğŸ“„ æ¨¡å‹ä¿¡æ¯

- **æ¨¡å‹åç§°**: vits-melo-tts-zh_en
- **æ”¯æŒè¯­è¨€**: ä¸­æ–‡ + è‹±æ–‡
- **é‡‡æ ·ç‡**: 44100 Hz
- **æ¨¡å‹å¤§å°**: 163 MB
- **è¯´è¯äººæ•°é‡**: 1
"@ | Out-File -Encoding UTF8 README.md
```

### 5. æ‰“åŒ…éƒ¨ç½²åŒ…

```powershell
# ä½¿ç”¨ 7-Zip æ‰“åŒ…
"C:\Program Files\7-Zip\7z.exe" a -ttar tts-deploy-package.tar D:\tts-deploy-package\*
"C:\Program Files\7-Zip\7z.exe" a -tbzip2 tts-deploy-package.tar.bz2 tts-deploy-package.tar

# æˆ–ä½¿ç”¨ PowerShell å‹ç¼©
Compress-Archive -Path D:\tts-deploy-package\* -DestinationPath tts-deploy-package.zip
```

---

## ğŸ§ CentOS æœåŠ¡å™¨éƒ¨ç½²

### 1. ä¼ è¾“éƒ¨ç½²åŒ…åˆ° CentOS æœåŠ¡å™¨

```bash
# åœ¨ Windows ä¸Šä½¿ç”¨ scp æˆ– WinSCP å·¥å…·ä¼ è¾“
# æˆ–è€…ä½¿ç”¨ Uç›˜ã€ç§»åŠ¨ç¡¬ç›˜ç­‰ç‰©ç†ä»‹è´¨

# å‡è®¾æ–‡ä»¶å·²ä¸Šä¼ åˆ° /opt/tts-deploy-package.tar.bz2
```

### 2. è§£å‹éƒ¨ç½²åŒ…

```bash
cd /opt
tar -xjf tts-deploy-package.tar.bz2
cd tts-deploy-package
```

### 3. å®‰è£…ç³»ç»Ÿä¾èµ–

```bash
# CentOS 7
sudo yum install -y python3 python3-devel gcc gcc-c++ make

# CentOS 8/Stream
sudo dnf install -y python3 python3-devel gcc gcc-c++ make
```

### 4. è¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
chmod +x deploy_centos.sh
./deploy_centos.sh
```

### 5. æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¦‚æœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip3 install --no-index --find-links=python-packages sherpa-onnx soundfile

# è¿è¡Œæµ‹è¯•
cd scripts
python3 test_tts.py
```

### 6. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥ç”Ÿæˆçš„éŸ³é¢‘æ–‡ä»¶
ls -lh scripts/*.wav

# æ’­æ”¾éŸ³é¢‘æµ‹è¯•ï¼ˆå¦‚æœæœ‰éŸ³é¢‘è®¾å¤‡ï¼‰
# aplay test_chinese.wav
```

---

## ğŸ” ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®

### 1. åˆ›å»º systemd æœåŠ¡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å°† TTS ä½œä¸ºåå°æœåŠ¡è¿è¡Œï¼Œå¯ä»¥åˆ›å»º systemd æœåŠ¡ï¼š

```bash
sudo nano /etc/systemd/system/tts-service.service
```

```ini
[Unit]
Description=Sherpa-ONNX TTS Service
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/opt/tts-deploy-package
Environment="VIRTUAL_ENV=/opt/tts-deploy-package/venv"
Environment="PATH=$VIRTUAL_ENV/bin:$PATH"
ExecStart=/opt/tts-deploy-package/venv/bin/python3 /opt/tts-deploy-package/scripts/tts_server.py
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl enable tts-service
sudo systemctl start tts-service
sudo systemctl status tts-service
```

### 2. æ€§èƒ½ä¼˜åŒ–

```python
# åœ¨é…ç½®ä¸­è°ƒæ•´çº¿ç¨‹æ•°ä»¥ä¼˜åŒ–æ€§èƒ½
tts_config = sherpa_onnx.OfflineTtsConfig(
    model=sherpa_onnx.OfflineTtsModelConfig(
        vits=sherpa_onnx.OfflineTtsVitsModelConfig(...),
        num_threads=8,  # æ ¹æ®æœåŠ¡å™¨ CPU æ ¸å¿ƒæ•°è°ƒæ•´ï¼ˆå»ºè®®ä¸ºæ ¸å¿ƒæ•°çš„ 50-80%ï¼‰
        provider="cpu",
    ),
)
```

### 3. å†…å­˜ç®¡ç†

- **å•æ¬¡åˆæˆ**: å»ºè®®æ–‡æœ¬é•¿åº¦ä¸è¶…è¿‡ 500 å­—
- **æ‰¹é‡å¤„ç†**: ä½¿ç”¨ `max_num_sentences` å‚æ•°æ§åˆ¶æ‰¹å¤„ç†å¤§å°
- **æœåŠ¡å™¨é…ç½®**: æ¨èè‡³å°‘ 2GB å¯ç”¨å†…å­˜

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æ¨¡å‹åŠ è½½é€Ÿåº¦æ…¢ï¼Ÿ

**A**: é¦–æ¬¡åŠ è½½ä¼šè¾ƒæ…¢ï¼ˆ5-10ç§’ï¼‰ï¼Œåç»­è°ƒç”¨ä¼šå¿«å¾ˆå¤šã€‚å¯ä»¥åœ¨æœåŠ¡å¯åŠ¨æ—¶é¢„åŠ è½½æ¨¡å‹ã€‚

### Q2: RTF (å®æ—¶ç‡) æ˜¯ä»€ä¹ˆï¼Ÿ

**A**: RTF < 1 è¡¨ç¤ºåˆæˆé€Ÿåº¦å¿«äºéŸ³é¢‘æ’­æ”¾é€Ÿåº¦ã€‚ä¾‹å¦‚ RTF=0.5 è¡¨ç¤ºåˆæˆ 1 ç§’éŸ³é¢‘åªéœ€ 0.5 ç§’ã€‚

### Q3: æ”¯æŒå“ªäº›æ–‡æœ¬æ ¼å¼ï¼Ÿ

**A**: 
- âœ… çº¯ä¸­æ–‡
- âœ… çº¯è‹±æ–‡
- âœ… ä¸­è‹±æ··åˆ
- âœ… æ•°å­—ï¼ˆè‡ªåŠ¨è½¬æ¢ä¸ºå‘éŸ³ï¼‰
- âš ï¸ ç‰¹æ®Šç¬¦å·å¯èƒ½å½±å“åˆæˆæ•ˆæœ

### Q4: å¦‚ä½•æ·»åŠ æ–°è¯åˆ°è¯å…¸ï¼Ÿ

**A**: ç¼–è¾‘ `lexicon.txt` æ–‡ä»¶ï¼ŒæŒ‰æ ¼å¼æ·»åŠ æ–°è¯åŠå…¶æ‹¼éŸ³ã€‚å‚è€ƒï¼š[æ·»åŠ æ–°è¯æ•™ç¨‹](https://github.com/k2-fsa/sherpa-onnx/pull/1209)

---

## ğŸ“š è¿›é˜¶ä½¿ç”¨

### Python API ç¤ºä¾‹

```python
import sherpa_onnx
import soundfile as sf

# åˆå§‹åŒ– TTS
tts_config = sherpa_onnx.OfflineTtsConfig(
    model=sherpa_onnx.OfflineTtsModelConfig(
        vits=sherpa_onnx.OfflineTtsVitsModelConfig(
            model="./models/vits-melo-tts-zh_en/model.onnx",
            lexicon="./models/vits-melo-tts-zh_en/lexicon.txt",
            tokens="./models/vits-melo-tts-zh_en/tokens.txt",
        ),
        num_threads=4,
        provider="cpu",
    ),
)

tts = sherpa_onnx.OfflineTts(tts_config)

# ç”ŸæˆéŸ³é¢‘
text = "ä½ å¥½ä¸–ç•Œï¼ŒHello Worldï¼"
audio = tts.generate(text, sid=0, speed=1.0)

# ä¿å­˜éŸ³é¢‘
sf.write("output.wav", audio.samples, samplerate=audio.sample_rate)

# è°ƒæ•´è¯­é€Ÿ
audio_fast = tts.generate(text, sid=0, speed=1.5)  # åŠ å¿« 50%
audio_slow = tts.generate(text, sid=0, speed=0.8)  # å‡æ…¢ 20%
```

### C++ API ç¤ºä¾‹

å‚è€ƒé¡¹ç›®ä¸­çš„ `c-api-examples/offline-tts-c-api.c`

---

## ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

| ç¡¬ä»¶é…ç½® | CPU | çº¿ç¨‹æ•° | RTF | 
|---------|-----|-------|-----|
| Raspberry Pi 4 | Cortex-A72 | 4 | 0.156 |
| æ ‡å‡†æœåŠ¡å™¨ | Intel Xeon | 8 | 0.05-0.10 |
| ç¬”è®°æœ¬ | Intel i5 | 4 | 0.10-0.15 |

*æ³¨ï¼šRTF è¶Šä½è¶Šå¥½ï¼Œ< 1 è¡¨ç¤ºå¯å®æ—¶åˆæˆ*

---

## ğŸ†˜ è·å–å¸®åŠ©

- **å®˜æ–¹æ–‡æ¡£**: https://k2-fsa.github.io/sherpa/onnx/tts/pretrained_models/vits.html
- **GitHub Issues**: https://github.com/k2-fsa/sherpa-onnx/issues
- **æ¨¡å‹ä¸‹è½½**: https://github.com/k2-fsa/sherpa-onnx/releases/tag/tts-models

---

**ç‰ˆæœ¬ä¿¡æ¯**:
- sherpa-onnx: 1.12.14
- æ¨¡å‹: vits-melo-tts-zh_en
- æ–‡æ¡£æ›´æ–°æ—¥æœŸ: 2024-10-21

